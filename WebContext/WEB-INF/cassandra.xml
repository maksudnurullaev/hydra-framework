<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="
       	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

	<!-- Cassandra descriptor bean -->
	<bean id="_cassandra_descriptor" class="org.hydra.db.server.CassandraDescriptorBean">		
		<!-- Set keyspaces -->
		<property name="keyspaces">
			<set>
				<ref bean="KSMain"/>
				<ref bean="KSMainTEST"/>
			</set>
		</property>					
	</bean>
	
	<!-- Cassandra accessor bean -->
	<bean id="_cassandra_accessor" class="org.hydra.db.server.CassandraAccessorBean">
		<!-- Set cassandra descriptor -->
		<property name="descriptor">
			<ref bean="_cassandra_descriptor"/>
		</property>
		
		<property name="host" value="localhost"/>
		<property name="port"><value type="int">9160</value></property>
		<property name="poolSizeMin"><value type="int">5</value></property>
	</bean>
	
	<!-- Ksp description -->
	<bean id="KSMain" class="org.hydra.db.beans.KeyspaceBean">
		<property name="name" value="KSMain"/>
		<property name="linkTableName" value="Links"/>		
		<property name="columnFamilies">
			<set>
				<ref bean="Tags"/>
				<ref bean="Users"/>
				<ref bean="Articles"/>
				<ref bean="Comments"/>
			</set>
		</property>
	</bean>	
		
	<!-- JUST4TEST - Test ksp description - JUST4TEST-->
	<bean id="KSMainTEST" class="org.hydra.db.beans.KeyspaceBean">
		<property name="name" value="KSMainTEST"/>
		<property name="linkTableName" value="Links"/>		
		<property name="columnFamilies">
			<set>
				<ref bean="Tags"/>
				<ref bean="Users"/>
				<ref bean="Articles"/>
				<ref bean="Comments"/>
			</set>
		</property>
	</bean>			
		
	<!--ColumnFamilies & Columns description -->
	<bean id="Articles" class="org.hydra.db.beans.ColumnFamilyBean">
		<property name="name" value="Articles" />
		<property name="columns">
			<set>
				<bean class="org.hydra.db.beans.ColumnBean">
					<property name="name" value="Title"/>
				</bean>
				
				<bean class="org.hydra.db.beans.ColumnBean">
					<property name="name" value="Text"/>
				</bean>
			</set>			
		</property>
		<property name="childs">
			<set>
				<ref bean="Comments"/>
			</set>			
		</property>
		<property name="links">
			<set>
				<ref bean="Tags"/>
				<ref bean="Users"/>
			</set>			
		</property>
	</bean>
	
	<bean id="Comments" class="org.hydra.db.beans.ColumnFamilyBean">
		<property name="name" value="Comments" />
		<property name="columns">
			<set>
				<bean class="org.hydra.db.beans.ColumnBean">
					<property name="name" value="Text"/>
				</bean>
			</set>			
		</property>
		<property name="childs">
			<set>
				<ref bean="Comments"/>
			</set>			
		</property>
		<property name="links">
			<set>
				<ref bean="Users"/>
			</set>			
		</property>
	</bean>

	<bean id="Users" class="org.hydra.db.beans.ColumnFamilyBean">
		<property name="name" value="Users" />
		<property name="columns">
			<set>
				<bean class="org.hydra.db.beans.ColumnBean">
					<property name="name" value="Email"/>
				</bean>	

				<bean class="org.hydra.db.beans.ColumnBean">
					<property name="name" value="Password"/>
				</bean>
			</set>			
		</property>
		<property name="childs">
			<set>
				<ref bean="Articles"/>
			</set>			
		</property>				
	</bean>

	<bean id="Tags" class="org.hydra.db.beans.ColumnFamilyBean">
		<property name="name" value="Tags" />
		<property name="columns">
			<set>
				<bean class="org.hydra.db.beans.ColumnBean">
					<property name="name" value="Name"/>
				</bean>	
			</set>			
		</property>
		<property name="links">
			<set>
				<ref bean="Tags"/>
			</set>			
		</property>											
	</bean>

</beans>
