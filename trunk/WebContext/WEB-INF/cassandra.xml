<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="
       	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

	<!-- Cassandra descriptor bean -->
	<bean id="_cassandra_descriptor" class="org.hydra.db.server.CassandraDescriptorBean">		
		<!-- Set keyspace -->
		<property name="keyspaces">
			<set>
				<ref bean="_ksp_KSMain"/>
			</set>
		</property>			
	</bean>
	
	<!-- Cassandra accessor bean -->
	<bean id="_cassandra_accessor" class="org.hydra.db.server.CassandraAccessorBean">
		<!-- Set cassandra descriptor -->
		<property name="descriptor">
			<ref bean="_cassandra_descriptor"/>
		</property>
		
		<property name="host" value="localhost"/>
		<property name="port"><value type="int">9160</value></property>
		<property name="poolSizeMin"><value type="int">5</value></property>
	</bean>
	
	<!-- Ksp description -->
	<bean id="_ksp_KSMain" class="org.hydra.db.beans.Ksp">
		<property name="name" value="KSMain"/>
		<property name="linkTableName" value="Links"/>		
		<property name="columnFamilies">
			<set>
				<ref bean="_cf_article"/>
				<ref bean="_cf_comments"/>
				<ref bean="_cf_users"/>
				<ref bean="_cf_emails"/>
				<ref bean="_cf_tags"/>
			</set>
		</property>
	</bean>	
	
	<!--Cf & CName description -->
	<bean id="_cf_article" class="org.hydra.db.beans.Cf">
		<property name="name" value="Articles" />
		<property name="keys">
			<map>
				<entry key="Title">    <bean class="org.hydra.db.beans.Key"><property name="super" value="COLUMNS"/></bean></entry>
				<entry key="Text">     <bean class="org.hydra.db.beans.Key"><property name="super" value="COLUMNS"/></bean></entry>
				<entry key="Comments"> <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
				<entry key="Tags">     <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
				<entry key="Authors">  <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
			</map>
		</property>
	</bean>
	
	<bean id="_cf_comments" class="org.hydra.db.beans.Cf">
		<property name="name" value="Comments" />
		<property name="keys">
			<map>
				<entry key="Text">     <bean class="org.hydra.db.beans.Key"><property name="super" value="COLUMNS"/></bean></entry>
				<entry key="Comments"> <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
				<entry key="Authors">  <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
			</map>
		</property>
	</bean>

	<bean id="_cf_users" class="org.hydra.db.beans.Cf">
		<property name="name" value="Users" />
		<property name="keys">
			<map>
				<entry key="Password"> <bean class="org.hydra.db.beans.Key"><property name="super" value="COLUMNS"/></bean></entry>
				<entry key="Atricles"> <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
				<entry key="Comments"> <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
				<entry key="EMails">   <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
			</map>
		</property>
	</bean>

	<bean id="_cf_emails" class="org.hydra.db.beans.Cf">
		<property name="name" value="Emails" />
		<property name="keys">
			<map>
				<entry key="Address"> <bean class="org.hydra.db.beans.Key"><property name="super" value="COLUMNS"/></bean></entry>
				<entry key="Users">   <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
			</map>
		</property>
	</bean>

	<bean id="_cf_tags" class="org.hydra.db.beans.Cf">
		<property name="name" value="Tags" />
		<property name="keys">
			<map>
				<entry key="Name">     <bean class="org.hydra.db.beans.Key"><property name="super" value="COLUMNS"/></bean></entry>
				<entry key="Articles"> <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
				<entry key="Tags">     <bean class="org.hydra.db.beans.Key"><property name="super" value="LINKS"/></bean></entry>
			</map>
		</property>
	</bean>

</beans>
